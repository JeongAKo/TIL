#### ë„¤íŠ¸ì›Œí‚¹

- ##### moya

MoyaëŠ” ì¼ë°˜ì ìœ¼ë¡œ ì—´ê±°í˜•(ì˜ˆ: `enum`)ì„ ì‚¬ìš©í•˜ì—¬ ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì„ íƒ€ì… ì•ˆì „(type-safe)í•œ ë°©ì‹ìœ¼ë¡œ ìº¡ìŠí™”í•˜ëŠ”ë° ì´ˆì ì„ ë§ì¶¤ ë„¤íŠ¸ì›Œí‚¹ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ë„¤íŠ¸ì›Œí¬ ê³„ì¸µì—ì„œ ì‘ì—…í• ë•Œ ì¶”ê°€ëœ ê²€ìƒ‰ ê°€ëŠ¥ì„±ê³¼ í•¨ê»˜(with added discoverability)ì»´íŒŒì¼ ì‹œê°„ ë³´ì¥(compile-time guarantees)ê³¼ ìì‹ ê°ì„ ì œê³µ í•©ë‹ˆë‹¤.



- ##### alamofire





[https://answerofgod.tistory.com/entry/SWIFT-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%EC%97%B0%EA%B2%B0%EB%90%98%EC%96%B4-%EC%9E%88%EB%8A%94%EC%A7%80-%ED%99%95%EC%9D%B8%ED%95%98%EA%B8%B0](https://answerofgod.tistory.com/entry/SWIFT-ë„¤íŠ¸ì›Œí¬-ì—°ê²°ë˜ì–´-ìˆëŠ”ì§€-í™•ì¸í•˜ê¸°)



https://stackoverflow.com/questions/25623272/how-to-use-scnetworkreachability-in-swift





~~~swift
    // deletingPathExtension í™•ì¥ì ì§€ìš°ê¸°
    // lastPathComponent ê²½ë¡œì˜ ë§ˆì§€ë§‰ íŒŒì¼ ì´ë¦„
~~~





##### í™•ì¥ì ìë¥´ê¸°

~~~swift
extension String {

    func fileName() -> String {
        return URL(fileURLWithPath: self).deletingPathExtension().lastPathComponent
    }

    func fileExtension() -> String {
        return URL(fileURLWithPath: self).pathExtension
    }
}

//  How to use
  let file = "image.png"
  let fileNameWithoutExtension = file.fileName()
  let fileExtension = file.fileExtension()
~~~



~~~swift
let url1 : String = "https://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4"
        let imageExtensions = ["png", "jpg", "gif"]
        //...
        // Iterate & match the URL objects from your checking results
        let url: URL? = NSURL(fileURLWithPath: url1) as URL
        let pathExtention = url?.pathExtension
            if imageExtensions.contains(pathExtention!)
            {
                print("Image URL: \(String(describing: url))")
                // Do something with it
            }else
            {
               print("Movie URL: \(String(describing: url))")
            }
~~~

[ì¶œì²˜](https://stackoverflow.com/questions/44843835/how-to-check-url-is-image-or-video)



~~~swift
import Foundation
import MobileCoreServices

extension URL {
    var isImage: Bool {
        let fileExtension = self.pathExtension
        if !fileExtension.isEmpty {
            let cfFileExtension: CFString = fileExtension as NSString
            if let uti = UTTypeCreatePreferredIdentifierForTag(kUTTagClassFilenameExtension, cfFileExtension, nil)?.takeRetainedValue() {
                return UTTypeConformsTo(uti, kUTTypeImage)
            }
        }
        return false
    }

    var isMovie: Bool {
        let fileExtension = self.pathExtension
        if !fileExtension.isEmpty {
            let cfFileExtension: CFString = fileExtension as NSString
            if let uti = UTTypeCreatePreferredIdentifierForTag(kUTTagClassFilenameExtension, cfFileExtension, nil)?.takeRetainedValue() {
                return UTTypeConformsTo(uti, kUTTypeMovie)
            }
        }
        return false
    }
}


    //How to use
    guard let url = URL(string: "http://hr-platform.nv5.pw/image/comp_1/pdf-test.flv") else {return}
    
    let fileExtension = url.pathExtension
    
    print("ğŸŸ£", url.pathExtension)
    
   if url.isMovie {
      print("ì•— ì´ê±´ ë¹„ë””ì˜¤ë„¤ìš”ğŸ¥")
    } else if url.isImage {
      print("ì´ë¯¸ì§€ íŒŒì¼ì´ë„¤ìš” ğŸ")
    } else {
      fatalError("Error file extension")
    }

~~~





# URLSession

https://melod-it.gitbook.io/sagwa/app-frameworks/foundation/url-loading-system/urlsession

`URLSession`ì€ HTTP/ HTTPS ê¸°ë°˜ì˜ ìš”ì²­ë“¤ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ í´ë˜ìŠ¤ ë° í´ë˜ìŠ¤ì˜ ì§‘í•©.

<img width="727" alt="ìŠ¤í¬ë¦°ìƒ· 2021-08-05 ì˜¤ì „ 12 32 57" src="https://user-images.githubusercontent.com/47776915/128210074-ca436945-86ad-484a-ab97-27fd8037360e.png">



#### URLSessionì˜ ì¢…ë¥˜

URL sessionì˜ ê¸°ëŠ¥ê³¼ ë™ì‘ì€ ìƒë‹¹ìˆ˜ê°€ ì„¸ì…˜ì„ ìƒì„±í• ë•Œ ì‚¬ìš©ëœ configurationì˜ ì¢…ë¥˜ì— ë”°ë¼ì„œ ê²°ì •ë©ë‹ˆë‹¤.

(configuration ê°ì²´ë¥¼ ê°–ì§€ ì•ŠëŠ”) **ì‹±ê¸€í†¤ shared** ì„¸ì…˜ì€ ê¸°ì´ˆì ì¸ ìš”ì²­ì— ì‚¬ìš©ë˜ë©° ì§ì ‘ ìƒì„±í•œ ê²ƒë§Œí¼ **ì»¤ìŠ¤í„°ë§ˆì´ì§•í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.** ê·¸ë ‡ì§€ë§Œ ì œí•œëœ ìš”êµ¬ì‚¬í•­ ë‚´ì—ì„œëŠ” ì¢‹ì€ ì¶œë°œì ì´ ë©ë‹ˆë‹¤. shared í´ë˜ìŠ¤ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•¨ìœ¼ë¡œì¨ ì´ ì„¸ì…˜ì— ì ‘ê·¼í•  ìˆ˜ ìˆìœ¼ë©° ì´ ì„¸ì…˜ì˜ ì œí•œì‚¬í•­ì— ëŒ€í•´ì„œ ì•Œê³  ì‹¶ë‹¤ë©´ í•´ë‹¹ ë©”ì„œë“œ ë¬¸ì„œë¥¼ ì½ì–´ë³´ì‹­ì‹œì˜¤.

- **Default ì„¸ì…˜**ì€ (ì»¤ìŠ¤í„°ë§ˆì´ì§•ì„ í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´) shared ì„¸ì…˜ê³¼ ìƒë‹¹íˆ ë¹„ìŠ·í•˜ì§€ë§Œ delegateë¥¼ í†µí•´ì„œ ë°ì´í„°ë¥¼ ì ì§„ì ìœ¼ë¡œ ì–»ì–´ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. URLSessionConfiguration í´ë˜ìŠ¤ì˜ default ë©”ì„œë“œë¥¼ í˜¸ì¶œí•¨ìœ¼ë¡œì¨ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- **Ephemeral session**ì€ shared sessionê³¼ ë¹„ìŠ·í•˜ì§€ë§Œ ìºì‹œë‚˜ ì¿ í‚¤, ìê²©ì¦ëª…ì„ ë””ìŠ¤í¬ì— ê¸°ë¡í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. URLSessionConfiguration í´ë˜ìŠ¤ì˜ ephemeral ë©”ì„œë“œë¥¼ í˜¸ì¶œí•¨ìœ¼ë¡œì¨ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- **Background session**ì€ ì•±ì´ ì‹¤í–‰ì¤‘ì´ì§€ ì•Šì„ ë•Œë„  ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì»¨í…ì¸ ë¥¼ ì—…ë¡œë“œí•˜ê±°ë‚˜ ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤. URLSessionConfiguration í´ë˜ìŠ¤ì˜ backgroundSessionConfiguration(_:) ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.





#### URLTaskì˜ ì¢…ë¥˜

ì„¸ì…˜ ë‚´ì—ì„œ ë°ì´í„°ë¥¼ ì„ íƒì ìœ¼ë¡œ ì—…ë¡œë“œí•˜ê±°ë‚˜ ì„œë²„ë¡œë¶€í„° ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” Taskë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë°ì´í„°ëŠ” ë””ìŠ¤í¬ì˜ íŒŒì¼ í˜•íƒœê°€ ë  ìˆ˜ë„ ìˆê³  ë©”ëª¨ë¦¬ ìƒì˜ NSData ê°ì²´ í˜•íƒœì¼ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. URLSession APIëŠ” ì„¸ê°€ì§€ ì¢…ë¥˜ì˜ taskë¥¼ ì œê³µí•©ë‹ˆë‹¤.

- **Data task**ëŠ” NSData ê°ì²´ë¥¼ ì‚¬ìš©í•´ì„œ ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê³  ë°›ìŠµë‹ˆë‹¤. Data taskëŠ” ì§§ê³ , ì¦ì€ ìš”ì²­ì„ ì„œë²„ì™€ ì£¼ê³  ë°›ëŠ” ê²½ìš°ì— ì‚¬ìš©í•˜ë„ë¡ ë§Œë“¤ì–´ì¡ŒìŠµë‹ˆë‹¤.
- **Upload task**ëŠ” data taskì™€ ë¹„ìŠ·í•˜ì§€ë§Œ (ì£¼ë¡œ íŒŒì¼ì˜ í˜•íƒœë¡œ) ë°ì´í„°ë¥¼ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ ì•±ì´ ì‹¤í–‰ì¤‘ì´ì§€ ì•Šì„ ë•Œì—ë„ ë°±ê·¸ë¼ìš´ë“œ ì—…ë¡œë“œë¥¼ ì§€ì›í•©ë‹ˆë‹¤.
- **Download task**ëŠ” íŒŒì¼ì˜ í˜•íƒœë¡œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤. ë˜í•œ ì•±ì´ ì‹¤í–‰ì¤‘ì´ì§€ ì•Šì„ ë•Œ ë°±ê·¸ë¼ìš´ë“œ ë‹¤ìš´ë¡œë“œì™€ ì—…ë¡œë“œë¥¼ ì§€ì›í•©ë‹ˆë‹¤.



## WebSockets

ì›¹ ì†Œì¼“ì´ë€? ë‘ í”„ë¡œê·¸ë¨ ê°„ì˜ ë©”ì„¸ì§€ë¥¼ êµí™˜í•˜ê¸° ìœ„í•œ í†µì‹ ë°©ë²• ì¤‘ í•˜ë‚˜ì´ë‹¤.



**HTTPí†µì‹ ì€** í´ë¼ì´ì–¸íŠ¸ê°€ ìš”ì²­ì„ ë³´ë‚´ëŠ” ê²½ìš°ì—ë§Œ ì‘ë‹µí•˜ëŠ” ë‹¨ë°©í–¥ í†µì‹ ì´ê³ 

ì‹¤ì‹œê°„ì—°ê²°ì´ ì•„ë‹ˆë¼ í•„ìš”í•  ë•Œë§Œ í†µì‹ (request)í•´ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë°©ì‹

 

**ì†Œì¼“ì€** íŠ¹ì • Portë¥¼ í†µí•´ì„œ ì—°ê²°ì„ ìœ ì§€í•˜ê³  ì‹¤ì‹œê°„ìœ¼ë¡œ ì–‘ë°©í–¥ í†µì‹ ì„ í•  ìˆ˜ ìˆëŠ” ë°©ì‹ (ì‹¤ì‹œê°„í†µì‹ ì— ìœ ë¦¬) APIì— ë¹„í•´ ì—„ì²­ë¹ ë¦„

 

**ì¼ë°˜ì ì¸ ì†Œì¼“**ì€ TCP/IP, UDP í”„ë¡œí† ì½œì„ ì´ìš©í•˜ì§€ë§Œ

**ì›¹ì†Œì¼“**ì€ HTTP Layerì—ì„œ ì‘ë™í•˜ëŠ” ì†Œì¼“ìœ¼ë¡œ ê¸°ë³¸ì ìœ¼ë¡œ HTTP(80) or HTTPS(443)í¬íŠ¸ë¥¼ ì‚¬ìš©

 ì›¹ì†Œì¼“ í”„ë¡œí† ì½œì€ WS, WSSê°€ ìˆë‹¤



#### ì›¹ì†Œì¼“ì˜ í•œê³„

ì›¹ì†Œì¼“ì€ ë¬¸ìì—´ë“¤ì„ ì£¼ê³  ë°›ì„ ìˆ˜ ìˆê²Œ í•´ì¤„ë¿ ê·¸ ì´ìƒì˜ ì¼ì€ í•˜ì§€ ì•ŠëŠ”ë‹¤

ì£¼ê³ ë°›ëŠ” ë¬¸ìì—´ì˜ í•´ë…ì€ ì˜¨ì „íˆ ì–´í”Œë¦¬ì¼€ì´ì…˜ì— ë§¡ê¸´ë‹¤

HTTPëŠ” í˜•ì‹ì´ ì •í•´ë‘ì—ˆê¸° ë•Œë¬¸ì— ëª¨ë‘ê°€ ì•½ì†ì„ ë”°ë¥´ê¸°ë§Œ í•˜ë©´ í•´ì„í• ìˆ˜ ìˆì§€ë§Œ

ì›¹ì†Œì¼“ì€ í˜•ì‹ì´ ì •í•´ì ¸ìˆì§€ ì•Šê¸° ë•Œë¬¸ì— ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‰½ê²Œ í•´ì„í•˜ê¸° í˜ë“¤ë‹¤

ë•Œë¬¸ì— ì›¹ì†Œì¼“ ë°©ì‹ì€ **sub_protocols**ë¥¼ ì‚¬ìš©í•´ì„œ ì£¼ê³ ë°›ëŠ” ë©”ì„¸ì§€ì˜ í˜•íƒœë¥¼ ì•½ì†!



**STOMP**(The Simple Text Oriented Messaging Protocol)ì€ ì±„íŒ…í†µì‹ ì„ í•˜ê¸° ìœ„í•œ í˜•ì‹ì„ ì •ì˜

HTTPì™€ ìœ ì‚¬í•˜ê²Œ ê°„ë‹¨íˆ ì •ì˜ë˜ì–´ í•´ì„í•˜ê¸° í¸í•œ í”„ë¡œí† ì½œ

ì¼ë°˜ì ìœ¼ë¡œ ì›¹ì†Œì¼“ ìœ„ì—ì„œ ì‚¬ìš©



â€‹    

